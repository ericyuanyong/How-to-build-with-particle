(kicad_sch (version 20230121) (generator eeschema)

  (uuid 4134950e-9dae-4b1b-960d-64485fb5f3b7)

  (paper "A4")

  (lib_symbols
    (symbol "Analog_ADC:ADS7042xDCU" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at -7.62 -7.62 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "ADS7042xDCU" (at 2.54 -7.62 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_SO:VSSOP-8_2.3x2mm_P0.5mm" (at 2.54 16.51 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ads7042.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "12 bit SAR ADC" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Ultra-Low Power, Ultra-Small Size, 12-Bit, 1-MSPS, SAR ADC" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "VSSOP*8*2.3x2mm*P0.5mm*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "ADS7042xDCU_0_1"
        (polyline
          (pts
            (xy -13.97 0)
            (xy -7.62 6.35)
            (xy 11.43 6.35)
            (xy 11.43 -6.35)
            (xy -7.62 -6.35)
            (xy -13.97 0)
          )
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "ADS7042xDCU_1_1"
        (pin power_in line (at 0 10.16 270) (length 3.81)
          (name "DVDD" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin input clock (at 15.24 0 180) (length 3.81)
          (name "SCLK" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 15.24 2.54 180) (length 3.81)
          (name "SDO" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 15.24 -2.54 180) (length 3.81)
          (name "~{CS}" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 -2.54 0) (length 3.81)
          (name "AINM" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 2.54 0) (length 3.81)
          (name "AINP" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 10.16 270) (length 3.81)
          (name "AVDD" (effects (font (size 1.27 1.27))))
          (number "7" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -10.16 90) (length 3.81)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Sensor_Energy:MCP39F521" (in_bom yes) (on_board yes)
      (property "Reference" "U" (at -11.43 19.05 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "MCP39F521" (at 8.89 19.05 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Package_DFN_QFN:QFN-28-1EP_5x5mm_P0.5mm_EP3.35x3.35mm" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "http://ww1.microchip.com/downloads/en/DeviceDoc/20005442A.pdf" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "i2c power monitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power Monitor, Calculation and Energy Accumulation, I2C, 16-bit, QFN-28" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "QFN*1EP*5x5mm*P0.5mm*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "MCP39F521_0_1"
        (rectangle (start -12.7 17.78) (end 12.7 -20.32)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "MCP39F521_1_1"
        (pin output line (at 15.24 -2.54 180) (length 2.54)
          (name "EVENT" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 15.24 0) (length 2.54)
          (name "~{RESET}" (effects (font (size 1.27 1.27))))
          (number "10" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 20.32 270) (length 2.54)
          (name "AVDD" (effects (font (size 1.27 1.27))))
          (number "11" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 15.24 10.16 180) (length 2.54)
          (name "A0" (effects (font (size 1.27 1.27))))
          (number "12" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 15.24 5.08 180) (length 2.54)
          (name "SCL" (effects (font (size 1.27 1.27))))
          (number "13" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 2.54 180) (length 2.54)
          (name "SDA" (effects (font (size 1.27 1.27))))
          (number "14" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 15.24 7.62 180) (length 2.54)
          (name "A1" (effects (font (size 1.27 1.27))))
          (number "15" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 10.16 0) (length 2.54)
          (name "I1+" (effects (font (size 1.27 1.27))))
          (number "16" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 7.62 0) (length 2.54)
          (name "I1-" (effects (font (size 1.27 1.27))))
          (number "17" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 2.54 0) (length 2.54)
          (name "V1-" (effects (font (size 1.27 1.27))))
          (number "18" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 5.08 0) (length 2.54)
          (name "V1+" (effects (font (size 1.27 1.27))))
          (number "19" (effects (font (size 1.27 1.27))))
        )
        (pin no_connect line (at -12.7 12.7 0) (length 2.54) hide
          (name "NC" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 -10.16 0) (length 2.54)
          (name "AN_IN" (effects (font (size 1.27 1.27))))
          (number "20" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 -22.86 90) (length 2.54)
          (name "AGND" (effects (font (size 1.27 1.27))))
          (number "21" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 15.24 -5.08 180) (length 2.54)
          (name "ZCD" (effects (font (size 1.27 1.27))))
          (number "22" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -10.16 180) (length 2.54)
          (name "REFIN+/OUT" (effects (font (size 1.27 1.27))))
          (number "23" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 2.54 -22.86 90) (length 2.54)
          (name "DGND" (effects (font (size 1.27 1.27))))
          (number "24" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 2.54 20.32 270) (length 2.54)
          (name "DVDD" (effects (font (size 1.27 1.27))))
          (number "25" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at 15.24 15.24 180) (length 2.54)
          (name "~{MCLR}" (effects (font (size 1.27 1.27))))
          (number "26" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 -22.86 90) (length 2.54) hide
          (name "DGND" (effects (font (size 1.27 1.27))))
          (number "27" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 15.24 -15.24 180) (length 2.54)
          (name "~{DR}" (effects (font (size 1.27 1.27))))
          (number "28" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 -22.86 90) (length 2.54) hide
          (name "DGND" (effects (font (size 1.27 1.27))))
          (number "29" (effects (font (size 1.27 1.27))))
        )
        (pin no_connect line (at -12.7 0 0) (length 2.54) hide
          (name "NC" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -15.24 -5.08 0) (length 2.54)
          (name "COMMON_B" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -15.24 -2.54 0) (length 2.54)
          (name "COMMON_A" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 -15.24 0) (length 2.54)
          (name "OSCI" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -15.24 -17.78 0) (length 2.54)
          (name "OSCO" (effects (font (size 1.27 1.27))))
          (number "7" (effects (font (size 1.27 1.27))))
        )
        (pin no_connect line (at 12.7 12.7 180) (length 2.54) hide
          (name "NC" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
        (pin no_connect line (at 12.7 0 180) (length 2.54) hide
          (name "NC" (effects (font (size 1.27 1.27))))
          (number "9" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )


  (text "Design note: reserve the low costs solution by using  current transformer"
    (at 165.1 50.8 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 815155df-8a2e-4e9b-9d6f-4e38d3d90baa)
  )

  (symbol (lib_id "Analog_ADC:ADS7042xDCU") (at 135.89 129.54 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 0ed57715-14e7-4b23-b7d9-62957b10bfc2)
    (property "Reference" "U?" (at 138.0841 138.43 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "ADS7042xDCU" (at 138.0841 140.97 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_SO:VSSOP-8_2.3x2mm_P0.5mm" (at 138.43 113.03 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ads7042.pdf" (at 135.89 129.54 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "2" (uuid 8f51475a-00a7-44e2-8e40-2ba2fd6ed8ec))
    (pin "6" (uuid 149ad879-1d61-4f41-a677-d608f21b3a1b))
    (pin "1" (uuid b4eee73e-2bbf-4eae-a133-a429fa84291e))
    (pin "5" (uuid 83d263da-1d41-4acf-ade1-bc1e9289117e))
    (pin "7" (uuid b8be03c5-4c7e-4326-8bd5-b87c43937814))
    (pin "4" (uuid d83eb4c3-957d-464d-8bf7-a29d1721ce6f))
    (pin "8" (uuid 9eb13e90-c278-478a-87f3-2ca8bebbe683))
    (pin "3" (uuid e2f2ee8c-d0a7-4b4a-95d1-b603b8c198cf))
    (instances
      (project "power_grid_monitor"
        (path "/51356a7f-c177-4967-b1a6-76ef5967fadb/3165d0a3-be31-4a43-af69-54a23aaf6f68"
          (reference "U?") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Sensor_Energy:MCP39F521") (at 138.43 55.88 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 5e15fb3f-a42f-457c-8279-303d690f45fe)
    (property "Reference" "U?" (at 143.1641 33.02 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "MCP39F521" (at 143.1641 35.56 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_DFN_QFN:QFN-28-1EP_5x5mm_P0.5mm_EP3.35x3.35mm" (at 138.43 53.34 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "http://ww1.microchip.com/downloads/en/DeviceDoc/20005442A.pdf" (at 138.43 53.34 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "5" (uuid 6ed76f8b-b531-43ee-b783-a2432566c3a8))
    (pin "3" (uuid 240811a5-5987-48c9-85f6-02d34f75da32))
    (pin "2" (uuid 5365e33c-26c2-4405-9325-a9806b19cf4d))
    (pin "7" (uuid 0acaa51f-04fe-41ca-960d-625db6948a75))
    (pin "18" (uuid f35f81c0-f4db-44d0-9b66-9588e1b2b5c8))
    (pin "29" (uuid fb9b06e2-1c6a-48ab-99c3-1e2f43908616))
    (pin "22" (uuid d96f9d46-5167-47fb-9f3c-3b3b47674191))
    (pin "4" (uuid 03bf2ad7-e54e-4932-94d9-ff5c89a0139a))
    (pin "13" (uuid 820c8bf3-4d1c-48c7-8f82-7f64515fdeb9))
    (pin "16" (uuid 986e9d0e-c508-4905-8898-fc1fa4db467f))
    (pin "10" (uuid 283956fe-edd9-4844-8fca-4065bbacbe6b))
    (pin "6" (uuid fd51ded6-732f-4e27-a88e-cc35a7d1f186))
    (pin "26" (uuid a632ece8-2958-439a-99a1-af0c3537a21e))
    (pin "12" (uuid 9f55ef33-68f5-4e8a-9741-c452d5088dfb))
    (pin "21" (uuid 8cf48e82-f045-45b6-918a-2becd422f548))
    (pin "8" (uuid c99e7ae5-40c5-4606-a933-58ca4514daac))
    (pin "23" (uuid b5e80eb5-d7b7-4508-bcc3-5690833c62b9))
    (pin "25" (uuid a2f3d944-72a3-46a9-98dc-72bd05b63b41))
    (pin "11" (uuid 1b0e336a-2ae6-43c2-ac0b-73b51e47bf3b))
    (pin "9" (uuid a2252824-ef6d-4403-986e-c38aae4620d6))
    (pin "24" (uuid c74a4142-4334-497e-88ce-539dfc9003f3))
    (pin "20" (uuid b74e1395-73bb-4851-ae75-cf1003a5e49a))
    (pin "19" (uuid 92b613f9-1001-4429-9111-473ee6ba4125))
    (pin "1" (uuid e45d52cd-608a-464b-8d1f-30e985130862))
    (pin "14" (uuid 257dc0eb-6ad1-4bea-abd4-c1ceddf6dd28))
    (pin "15" (uuid b1eb0d7a-3ac5-41c9-ad4f-89cd70654267))
    (pin "17" (uuid 204aa5d4-9b16-4632-a16b-d934f5e453a0))
    (pin "27" (uuid 81e4c19b-5198-4ab0-a1fd-efd11206865e))
    (pin "28" (uuid 2fabc238-ab49-4c58-839c-e2f0e54b7fbd))
    (instances
      (project "power_grid_monitor"
        (path "/51356a7f-c177-4967-b1a6-76ef5967fadb/3165d0a3-be31-4a43-af69-54a23aaf6f68"
          (reference "U?") (unit 1)
        )
      )
    )
  )
)
